import{_ as p}from"./AuthenticatedLayout-CCYB7-lj.js";import{g as e,a as h,b as _,h as w,w as f,o as t,t as l,i as u,f as i,d as s,F as o,C as x}from"./app-BwyZwexD.js";const S={key:0,class:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 text-green-800"},C={key:1,class:"mb-6 rounded-lg border border-amber-200 bg-amber-50 p-4 text-amber-800"},N={class:"mt-2 text-sm"},M=["href"],$={class:"mb-6 flex flex-wrap items-start justify-between gap-4"},B={key:0,class:"rounded-xl border border-gray-200 bg-white px-8 py-6 shadow-sm"},F={class:"flex flex-col gap-3"},z={class:"flex items-center gap-3"},D={key:0,class:"text-5xl font-bold text-gray-900 leading-none"},V={key:1,class:"text-5xl text-gray-400 leading-none"},j={class:"flex gap-0.5 text-2xl"},L={key:0,class:"text-amber-400"},R={key:1,class:"text-amber-400 opacity-50"},H={key:2,class:"text-gray-300"},T={class:"text-sm text-gray-600"},U={key:0,class:"flex flex-wrap gap-4 items-stretch"},A={class:"flex-1 min-w-[280px] rounded-xl border border-gray-200 bg-white p-10 text-center text-gray-500 flex items-center justify-center"},E=["href"],Y={class:"rounded-xl border border-gray-200 bg-white px-8 py-6 shadow-sm shrink-0"},q={class:"flex flex-col gap-3"},G={class:"flex items-center gap-3"},I={key:0,class:"text-5xl font-bold text-gray-900 leading-none"},J={key:1,class:"text-5xl text-gray-400 leading-none"},K={class:"flex gap-0.5 text-2xl"},O={key:0,class:"text-amber-400"},P={key:1,class:"text-amber-400 opacity-50"},Q={key:2,class:"text-gray-300"},W={class:"text-sm text-gray-600"},X={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Z={class:"mb-3 flex items-center justify-between"},ee={class:"flex items-center gap-3 text-sm text-gray-600"},te={class:"flex items-center gap-1.5"},se={class:"font-medium"},ne={key:0,class:"flex shrink-0 gap-0.5 text-xl"},ae={key:0,class:"text-amber-400"},re={key:1,class:"text-gray-300"},le={class:"mb-3"},oe={class:"font-semibold text-gray-900"},de={key:0,class:"text-sm text-gray-600"},ie={class:"text-gray-700 leading-relaxed whitespace-pre-wrap"},ue={__name:"Reviews",props:{rating:{type:Number,default:null},reviewsCount:{type:Number,default:0},companyName:{type:String,default:null},reviews:{type:Array,default:()=>[]},error:{type:String,default:null},success:{type:String,default:null}},setup(n){const b=d=>{if(!d)return"";const a=new Date(d),r=String(a.getDate()).padStart(2,"0"),y=String(a.getMonth()+1).padStart(2,"0"),g=a.getFullYear(),v=String(a.getHours()).padStart(2,"0"),k=String(a.getMinutes()).padStart(2,"0");return`${r}.${y}.${g} ${v}:${k}`},c=d=>Math.min(5,Math.floor(d||0)),m=d=>(d||0)%1>=.5;return(d,a)=>(t(),e(o,null,[h(_(w),{title:"Отзывы"}),h(p,null,{header:f(()=>[...a[0]||(a[0]=[s("div",null,null,-1)])]),default:f(()=>[n.success?(t(),e("div",S,l(n.success),1)):u("",!0),n.error?(t(),e("div",C,[i(l(n.error)+" ",1),s("p",N,[s("a",{href:d.route("yandex.settings"),class:"font-medium underline"},"Перейти в настройки",8,M),a[1]||(a[1]=i(" и указать ссылку. ",-1))])])):(t(),e(o,{key:2},[s("div",$,[a[3]||(a[3]=s("span",{class:"inline-flex items-center gap-2 rounded-full border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700"},[s("svg",{class:"h-4 w-4 text-red-500",fill:"currentColor",viewBox:"0 0 24 24"},[s("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})]),s("span",null,"Яндекс Карты")],-1)),n.reviews&&n.reviews.length>0?(t(),e("div",B,[s("div",F,[s("div",z,[n.rating!==null?(t(),e("div",D,l(Number(n.rating).toFixed(1)),1)):(t(),e("div",V,"—")),s("div",j,[(t(),e(o,null,x(5,r=>(t(),e(o,{key:r},[r<=c(n.rating)?(t(),e("span",L,"★")):r===c(n.rating)+1&&m(n.rating)?(t(),e("span",R,"★")):(t(),e("span",H,"★"))],64))),64))])]),a[2]||(a[2]=s("div",{class:"border-t border-gray-200"},null,-1)),s("p",T," Всего отзывов: "+l((n.reviewsCount??0).toLocaleString("ru-RU")),1)])])):u("",!0)]),!n.reviews||n.reviews.length===0?(t(),e("div",U,[s("div",A,[n.rating!==null||(n.reviewsCount??0)>0?(t(),e(o,{key:0},[i(" Рейтинг и количество отзывов загружены. Список текстов отзывов Яндекс.Карты подгружают по отдельному запросу в браузере, поэтому при загрузке страницы сервером они могут быть недоступны. Отображаем только сводку. ")],64)):(t(),e(o,{key:1},[a[4]||(a[4]=i(" Отзывов пока нет. Укажите ссылку в ",-1)),s("a",{href:d.route("yandex.settings"),class:"font-medium text-blue-600 underline"},"настройках",8,E),a[5]||(a[5]=i(" — данные подгрузятся при загрузке страницы. ",-1))],64))]),s("div",Y,[s("div",q,[s("div",G,[n.rating!==null?(t(),e("div",I,l(Number(n.rating).toFixed(1)),1)):(t(),e("div",J,"—")),s("div",K,[(t(),e(o,null,x(5,r=>(t(),e(o,{key:r},[r<=c(n.rating)?(t(),e("span",O,"★")):r===c(n.rating)+1&&m(n.rating)?(t(),e("span",P,"★")):(t(),e("span",Q,"★"))],64))),64))])]),a[6]||(a[6]=s("div",{class:"border-t border-gray-200"},null,-1)),s("p",W," Всего отзывов: "+l((n.reviewsCount??0).toLocaleString("ru-RU")),1)])])])):(t(),e("div",X,[(t(!0),e(o,null,x(n.reviews,(r,y)=>(t(),e("div",{key:y,class:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm"},[s("div",Z,[s("div",ee,[s("span",null,l(b(r.date)),1),s("span",te,[s("span",se,l(n.companyName||"Филиал 1"),1),a[7]||(a[7]=s("svg",{class:"h-3.5 w-3.5 text-red-500",fill:"currentColor",viewBox:"0 0 24 24"},[s("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1))])]),r.rating!==void 0&&r.rating!==null?(t(),e("div",ne,[(t(),e(o,null,x(5,g=>(t(),e(o,{key:g},[g<=(r.rating||0)?(t(),e("span",ae,"★")):(t(),e("span",re,"★"))],64))),64))])):u("",!0)]),s("div",le,[s("p",oe,l(r.author||"Гость"),1),r.phone?(t(),e("p",de,l(r.phone),1)):u("",!0)]),s("p",ie,l(r.text||"—"),1)]))),128))]))],64))]),_:1})],64))}};export{ue as default};
